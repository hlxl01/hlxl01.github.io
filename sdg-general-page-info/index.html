<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="style.css">
    </head>
    <body>
        <div id="sdg-chart-container">
            <svg id="sdg-chart" width="700" height="600"  viewBox="-30 -25 50 50">
              <!-- SVG Paths for each SDG will be generated by JavaScript -->
            </svg>
            <div class="sdg-info">
              <img class="sdg-icon" src="">
              <div class="sdg-name">dsd</div>
            </div>
        </div>
        
    </body>
    <script>
       const sdgData = [
  { id: 1, color: '#E5243B'},
  { id: 2, color: '#DDA63A'},
  { id: 3, color: '#4C9F38'},
  { id: 4, color: '#C5192D'},
  { id: 5, color: '#FF3A21'},
  { id: 6, color: '#26BDE2'},
  { id: 7, color: '#FCC30B'},
  { id: 8, color: '#A21942'},
  { id: 9, color: '#FD6925'},
  { id: 10, color: '#DD1367'},
  { id: 11, color: '#FD9D24'},
  { id: 12, color: '#BF8B2E'},
  { id: 13, color: '#3F7E44'},
  { id: 14, color: '#0A97D9'},
  { id: 15, color: '#56C02B'},
  { id: 16, color: '#00689D'},
  { id: 17, color: '#19486A'},
  // Include all SDGs with their colors, descriptions, and icon paths...
];

function drawSDGSegments(sdgData) {
  const ns = "http://www.w3.org/2000/svg";
  const chart = document.getElementById('sdg-chart');
  const radius = 17; // Radius of the circle
  let startAngle = 0;
  const anglePerSegment = 360 / sdgData.length;

  sdgData.forEach((sdg, index) => {
    const endAngle = startAngle + anglePerSegment;
    const path = document.createElementNS(ns, "path");
    path.setAttribute("d", describeArc(0, 0, radius, startAngle, endAngle));
    path.setAttribute("fill", sdg.color);
    path.setAttribute("stroke", "white");
    path.setAttribute("stroke-width", "0.1");
    path.setAttribute("data-index", index);
    path.addEventListener('mouseover', () => showSDGInfo(index));
    path.addEventListener('mouseout', () => hideSDGInfo());
    chart.appendChild(path);
    startAngle = endAngle;
  });
}


function describeArc(x, y, radius, startAngle, endAngle) {
    var innerRadius = radius * 0.85;  // Adjust inner radius to create a gap
    var outerRadius = radius;

    var startOuter = polarToCartesian(x, y, outerRadius, endAngle - 0.1); // Subtract small value for gap
    var endOuter = polarToCartesian(x, y, outerRadius, startAngle + 0.1); // Add small value for gap

    var arcSweep = endAngle - startAngle <= 180 ? "0" : "1";

    var d = [
        "M", startOuter.x, startOuter.y,
        "A", outerRadius, outerRadius, 0, arcSweep, 0, endOuter.x, endOuter.y,
        "L", x, y,
        "Z"
    ].join(" ");

    return d;
}

function polarToCartesian(centerX, centerY, radius, angleInDegrees) {
  const angleInRadians = (angleInDegrees - 90) * Math.PI / 180.0;
  return {
    x: centerX + (radius * Math.cos(angleInRadians)),
    y: centerY + (radius * Math.sin(angleInRadians))
  };
}

function hideSDGInfo() {
  const sdgInfo = document.getElementById('sdg-info');
  sdgInfo.classList.remove('visible');
}

function handleMouseOver(e) {
    // Optionally, handle additional UI changes or data display
    showSDGInfo(e.target.getAttribute('data-index'));
}

function handleMouseOut(e) {
    // Optionally, reset UI changes or hide data display
    hideSDGInfo();
}

// Attach event listeners
document.querySelectorAll('#sdg-chart path').forEach(path => {
    path.addEventListener('mouseover', handleMouseOver);
    path.addEventListener('mouseout', handleMouseOut);
});

// Initialize the chart
drawSDGSegments(sdgData);
    </script>
</html>